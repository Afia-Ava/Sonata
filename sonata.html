<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mood-Based Spotify Playlist Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --cream: #fffdfa;
            --taupe: #f3f0ec;
            --beige: #e3d6c8;
            --brown: #4a3b2e;
            --merlot: #6d263d;
            --charcoal: #232323;
            --black: #181818;
            --shadow: 0 4px 24px 0 rgba(61, 38, 38, 0.10);
            --radius: 0;
        }
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            background: linear-gradient(135deg, var(--cream) 0%, var(--taupe) 100%);
            color: var(--brown);
            font-family: 'Outfit', 'Segoe UI', Arial, sans-serif;
            font-size: 18px;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            box-sizing: border-box;
        }
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: row;
        }
        .sidebar {
            width: 230px;
            background: var(--charcoal);
            color: #fff;
            display: flex;
            flex-direction: column;
            padding: 36px 0 28px 0;
            box-shadow: 2px 0 24px rgba(61,38,38,0.10);
            min-height: 100vh;
            z-index: 2;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }
        .sidebar .sidebar-logo {
            font-size: 2.2em;
            font-weight: 900;
            letter-spacing: 2.5px;
            color: #fff;
            text-align: center;
            margin-bottom: 44px;
            font-family: 'Outfit', 'Segoe UI', Arial, sans-serif;
            text-shadow: 0 2px 12px rgba(109,38,61,0.25), 0 1px 0 #000;
        }
        .sidebar nav {
            flex: 1 1 auto;
        }
        .sidebar ul {
            list-style: none;
            padding: 0 0 0 28px;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 22px;
        }
        .sidebar ul li {
            display: flex;
            align-items: center;
            gap: 14px;
            font-size: 1.1em;
            font-weight: 500;
            cursor: pointer;
            border-radius: 10px;
            padding: 8px 8px 8px 0;
            transition: background 0.18s;
        }
        .sidebar ul li:hover {
            background: rgba(255,255,255,0.08);
        }
        .sidebar ul li .icon {
            width: 20px;
            height: 20px;
            background: var(--beige);
            border-radius: 6px;
            display: inline-block;
        }
        .sidebar .sidebar-footer {
            margin-top: 36px;
            text-align: center;
        }
        .sidebar .sidebar-footer button {
            background: var(--merlot);
            color: #fff;
            border: none;
            border-radius: 0;
            padding: 10px 32px;
            font-size: 1.08em;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
            box-shadow: 0 2px 8px rgba(61,38,38,0.06);
        }
        .sidebar .sidebar-footer button:hover {
            background: #fff;
            color: var(--merlot);
        }
        .main-content {
            flex: 1 1 auto;
            display: flex;
            flex-direction: column;
            min-width: 0;
            min-height: 100vh;
            background: transparent;
            padding: 0;
        }
        .navbar {
            width: 100%;
            background: var(--merlot);
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 0 2vw;
            box-sizing: border-box;
            height: 64px;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 10;
            border-top-left-radius: 0;
            border-top-right-radius: 0;
        }
        .navbar .nav-title {
            display: none;
        }
        .navbar ul {
            display: flex;
            gap: 28px;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .navbar ul li a {
            color: #fff;
            text-decoration: none;
            font-size: 1.1em;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 18px;
            transition: background 0.2s, color 0.2s, box-shadow 0.2s;
            position: relative;
        }
        .navbar ul li a:hover, .navbar ul li a:focus {
            background: var(--beige);
            color: var(--merlot);
            box-shadow: 0 2px 8px rgba(109,38,61,0.08);
        }
        .content-area {
            flex: 1 1 auto;
            display: flex;
            flex-direction: column;
            padding: 40px 56px 40px 56px;
            min-width: 0;
        }
        .search-row {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 32px;
        }
        .search-bar {
            flex: 1 1 auto;
            display: flex;
            align-items: center;
            background: #fff;
            border-radius: 0;
            padding: 0 22px;
            box-shadow: 0 2px 12px rgba(61,38,38,0.07);
            border: 1.5px solid var(--beige);
        }
        .search-bar input[type="text"] {
            border: none;
            background: transparent;
            font-size: 1.15em;
            padding: 16px 10px;
            outline: none;
            color: var(--charcoal);
            width: 100%;
            font-family: inherit;
        }
        .search-bar .icon {
            width: 22px;
            height: 22px;
            background: var(--beige);
            border-radius: 6px;
            margin-right: 10px;
        }
        .search-row .search-btn {
            background: var(--merlot);
            color: #fff;
            border: none;
            border-radius: 0;
            padding: 12px 32px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s, color 0.2s, box-shadow 0.18s;
            box-shadow: 0 2px 8px rgba(61,38,38,0.06);
        }
        .search-row .search-btn:hover {
            background: var(--charcoal);
            color: #fff;
            box-shadow: 0 4px 16px rgba(109,38,61,0.13);
        }
        .recent-moods-section {
            margin-bottom: 40px;
        }
        .recent-moods-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        .recent-moods-header h2 {
            font-size: 1.22em;
            font-weight: 600;
            color: var(--brown);
            margin: 0;
            font-family: inherit;
        }
        .recent-moods-header button {
            background: var(--merlot);
            color: #fff;
            border: none;
            border-radius: 0;
            padding: 8px 22px;
            font-size: 1em;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        .recent-moods-header button:hover {
            background: var(--charcoal);
            color: #fff;
        }
        .recent-moods-list {
            display: flex;
            flex-direction: column;
            gap: 14px;
        }
        .recent-mood-item {
            display: flex;
            align-items: center;
            background: #fff;
            border-radius: 0;
            padding: 14px 20px;
            box-shadow: 0 2px 8px rgba(61,38,38,0.07);
            gap: 16px;
            font-size: 1.07em;
            font-family: inherit;
            color: var(--charcoal);
        }
        .recent-mood-item .img-placeholder {
            width: 36px;
            height: 36px;
            background: var(--beige);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--charcoal);
            font-size: 1.2em;
            font-weight: 700;
        }
        .recent-mood-item .mood-name {
            flex: 1 1 auto;
            color: var(--charcoal);
            font-size: 1.09em;
            font-family: inherit;
        }
        .recent-mood-item .remove-btn {
            background: none;
            border: none;
            color: var(--merlot);
            font-size: 1.3em;
            cursor: pointer;
            padding: 0 8px;
            border-radius: 6px;
            transition: background 0.2s;
        }
        .recent-mood-item .remove-btn:hover {
            background: var(--beige);
        }
        .personalized-section {
            margin-top: 32px;
        }
        .personalized-header {
            font-size: 1.22em;
            font-weight: 600;
            color: var(--brown);
            margin-bottom: 18px;
            font-family: inherit;
        }
        .personalized-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 22px;
        }
        .personalized-card {
            background: #fff;
            border-radius: 0;
            box-shadow: 0 2px 12px rgba(61,38,38,0.09);
            padding: 38px 0;
            text-align: center;
            font-size: 1.15em;
            font-weight: 600;
            color: var(--merlot);
            cursor: pointer;
            transition: background 0.2s, color 0.2s, transform 0.18s, box-shadow 0.18s;
            font-family: inherit;
            letter-spacing: 0.5px;
        }
        .personalized-card:hover {
            background: var(--merlot);
            color: #fff;
            transform: translateY(-6px) scale(1.05);
            box-shadow: 0 8px 32px rgba(109,38,61,0.13);
        }
        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { padding-left: 0; }
            .content-area { padding: 24px 8vw 24px 8vw; }
        }
        @media (max-width: 600px) {
            .content-area { padding: 16px 2vw 16px 2vw; }
            .personalized-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="sidebar-logo">Sonata</div>
        <nav>
            <ul>
                <li><span class="icon"></span><span>Explore</span></li>
                <li><span class="icon"></span><span>Playlists</span></li>
                <li><span class="icon"></span><span>Favorites</span></li>
                <li><span class="icon"></span><span>Recents</span></li>
                <li><span class="icon"></span><span>User Profile</span></li>
            </ul>
        </nav>
        <div class="sidebar-footer">
            <button>Logout</button>
        </div>
    </aside>
    <div class="main-content">
        <nav class="navbar">
            <!-- Optionally add nav links here if needed -->
        </nav>
        <div class="content-area">
            <div class="search-row">
                <div class="search-bar">
                    <span class="icon"></span>
                    <input type="text" id="moodInput" placeholder="Search or enter your mood..." autocomplete="off" />
                </div>
                <button class="search-btn" onclick="handleMoodSubmit()">Search</button>
            </div>
            <div class="recent-moods-section">
                <div class="recent-moods-header">
                    <h2>Your recent moods</h2>
                    <button onclick="clearRecentMoods()">Clear</button>
                </div>
                <div class="recent-moods-list" id="recentMoodsList">
                    <!-- Example items -->
                    <div class="recent-mood-item">
                        <div class="img-placeholder">ðŸŽµ</div>
                        <div class="mood-name">Mood: Chillwave</div>
                        <button class="remove-btn" onclick="removeMood(this)">&times;</button>
                    </div>
                    <div class="recent-mood-item">
                        <div class="img-placeholder">ðŸŽ¶</div>
                        <div class="mood-name">Mood: Study Focus</div>
                        <button class="remove-btn" onclick="removeMood(this)">&times;</button>
                    </div>
                    <div class="recent-mood-item">
                        <div class="img-placeholder">ðŸ˜Š</div>
                        <div class="mood-name">Mood: Happy Vibes</div>
                        <button class="remove-btn" onclick="removeMood(this)">&times;</button>
                    </div>
                </div>
            </div>
            <div class="personalized-section">
                <div class="personalized-header">Personalized for you</div>
                <div class="personalized-grid">
                    <div class="personalized-card">Joyful Mix</div>
                    <div class="personalized-card">Serene Mix</div>
                    <div class="personalized-card">Energetic Mix</div>
                    <div class="personalized-card">Inspiring Mix</div>
                    <div class="personalized-card">Calm Mix</div>
                    <div class="personalized-card">Classic Vibes</div>
                    <div class="personalized-card">Rebellious Mix</div>
                    <div class="personalized-card">Romantic Vibes</div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // --- Spotify API Integration ---
        // Replace with your own Spotify API credentials
        const SPOTIFY_CLIENT_ID = 'YOUR_SPOTIFY_CLIENT_ID';
        const SPOTIFY_CLIENT_SECRET = 'YOUR_SPOTIFY_CLIENT_SECRET';

        let spotifyAccessToken = null;
        let spotifyTokenExpires = 0;

        async function getSpotifyAccessToken() {
            const now = Date.now();
            if (spotifyAccessToken && now < spotifyTokenExpires) {
                return spotifyAccessToken;
            }
            const resp = await fetch('https://accounts.spotify.com/api/token', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'Authorization': 'Basic ' + btoa(SPOTIFY_CLIENT_ID + ':' + SPOTIFY_CLIENT_SECRET)
                },
                body: 'grant_type=client_credentials'
            });
            const data = await resp.json();
            spotifyAccessToken = data.access_token;
            spotifyTokenExpires = now + (data.expires_in - 60) * 1000;
            return spotifyAccessToken;
        }

        async function searchSpotifyPlaylists(query) {
            const token = await getSpotifyAccessToken();
            const resp = await fetch(
                `https://api.spotify.com/v1/search?q=${encodeURIComponent(query)}&type=playlist&limit=8`,
                { headers: { 'Authorization': 'Bearer ' + token } }
            );
            const data = await resp.json();
            return (data.playlists && data.playlists.items) ? data.playlists.items : [];
        }

        // Remove a mood from recent moods
        function removeMood(btn) {
            btn.closest('.recent-mood-item').remove();
        }
        // Clear all recent moods
        function clearRecentMoods() {
            document.getElementById('recentMoodsList').innerHTML = '';
        }
        // Handle mood search/submit
        async function handleMoodSubmit() {
            const input = document.getElementById('moodInput');
            const mood = input.value.trim();
            if (!mood) return;
            showLoadingPersonalized();
            try {
                const playlists = await searchSpotifyPlaylists(mood);
                renderPersonalizedGrid(playlists);
            } catch (e) {
                renderPersonalizedGrid([], 'Error fetching playlists from Spotify.');
            }
            input.value = '';
        }

        function showLoadingPersonalized() {
            document.querySelector('.personalized-grid').innerHTML =
                `<div style="grid-column: 1/-1; text-align:center; color:var(--charcoal); font-size:1.1em; padding:40px 0;">Loading playlists...</div>`;
        }

        function renderPersonalizedGrid(playlists, errorMsg) {
            const grid = document.querySelector('.personalized-grid');
            if (errorMsg) {
                grid.innerHTML = `<div style="grid-column: 1/-1; color:var(--merlot); text-align:center; font-size:1.1em; padding:40px 0;">${errorMsg}</div>`;
                return;
            }
            if (!playlists || playlists.length === 0) {
                grid.innerHTML = `<div style="grid-column: 1/-1; color:var(--charcoal); text-align:center; font-size:1.1em; padding:40px 0;">No playlists found for this mood.</div>`;
                return;
            }
            grid.innerHTML = playlists.map(pl => `
                <div class="personalized-card" onclick="window.open('${pl.external_urls.spotify}', '_blank')">
                    <img src="${pl.images[0]?.url || ''}" alt="cover" style="width:80px;height:80px;object-fit:cover;display:block;margin:0 auto 18px auto;box-shadow:0 2px 8px rgba(61,38,38,0.10);" />
                    <div style="font-size:1.08em;font-weight:600;color:var(--merlot);margin-bottom:6px;">${pl.name}</div>
                    <div style="font-size:0.98em;color:var(--brown);">${pl.owner.display_name}</div>
                </div>
            `).join('');
        }
    </script>
</body>
</html>
